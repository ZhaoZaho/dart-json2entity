import 'dart:io';

import 'cli.dart';
import 'ew_builder.dart';
import 'utils.dart';

main(List < String > args) {

  // test convert json list from file
  testFromFile();

  // test convert json string
  testFromString();
}

void testFromString() {
  
  var jsonStr = '{"result":1,"msg":"success","data":{"age":18}}';
  var outName = 'AgeModel';
  new EntityWriterBuilder()
    .supportJsonSerializable(true)
    .name(outName)
    .jsonStr(jsonStr)
    .outpath('output/')
    .build()
    .convert();
  
  
  var jsonStrFromToutiao = '''
  {"has_more": false, "message": "success", "data": [{"image_url": "//p99.pstatp.com/list/pgc-image/153717284846876f08c8bba", "single_mode": false, "middle_mode": true, "more_mode": true, "tag": "news_travel", "chinese_tag": "\u65c5\u6e38", "tag_url": "news_travel", "title": "\u5e7f\u4e1c\u9762\u79ef\u6700\u5c0f\u7684\u57ce\u5e02\uff0c\u62e5\u67098\u4e2a\u56fd\u5bb6\u4e00\u7c7b\u53e3\u5cb8\uff0c\u4ec5\u6b21\u4e8e\u6df1\u5733", "label": ["\u65c5\u6e38\u4ea7\u4e1a", "\u65c5\u6e38"], "source": "\u6751\u5934\u8001\u9a6c\u770b\u4e16\u754c", "group_source": 2, "has_gallery": true, "media_url": "/c/user/3372576780/", "media_avatar_url": "//p1.pstatp.com/large/3b050000ca7509905dcb", "image_list": [{"url": "//p99.pstatp.com/list/364x360/pgc-image/153717284846876f08c8bba"}, {"url": "//p99.pstatp.com/list/272x178/pgc-image/15371728483142e7532b2ed"}, {"url": "//p99.pstatp.com/list/272x178/pgc-image/1537172848498d1d08f697b"}], "gallary_image_count": 3, "source_url": "/group/6602110145377862152/", "article_genre": "gallery", "item_id": "6602110145377862152", "is_feed_ad": false, "gallary_flag": 2, "behot_time": 1543083236, "comments_count": 8, "group_id": "6602110145377862152", "middle_image": "http://p99.pstatp.com/list/pgc-image/153717284846876f08c8bba"}, {"image_url": "//p1.pstatp.com/list/pgc-image/d2bc2d21b02047d2afc4eb120a85c1c8", "single_mode": false, "middle_mode": true, "more_mode": true, "tag": "news_entertainment", "chinese_tag": "\u5a31\u4e50", "tag_url": "news_entertainment", "title": "\u6f14\u5458\u6bb7\u6843\u7684\u5634\u662f\u600e\u4e48\u4e86\uff1f\u4eca\u5929\u6211\u7ec8\u4e8e\u77e5\u9053\u4e86\uff01", "label": ["\u6bb7\u6843", "\u89e3\u653e\u519b\u827a\u672f\u5b66\u9662", "\u827a\u672f", "\u6c88\u4fca", "\u5b59\u4fea"], "source": "\u611f\u60c5\u6cf0\u56fd\u50ac\u8089", "group_source": 2, "has_gallery": true, "media_url": "/c/user/106674237758/", "media_avatar_url": "//p3.pstatp.com/large/fe80000021045a6a0cb7", "image_list": [{"url": "//p1.pstatp.com/list/640x360/pgc-image/d2bc2d21b02047d2afc4eb120a85c1c8"}, {"url": "//p99.pstatp.com/list/190x124/pgc-image/036d3299dfbe4a74a13c21359536a7c6"}, {"url": "//p99.pstatp.com/list/190x124/pgc-image/8b9725a7b9354b8781d121ea2b64e691"}], "gallary_image_count": 8, "source_url": "/group/6626599935003329028/", "article_genre": "gallery", "item_id": "6626599935003329028", "is_feed_ad": false, "gallary_flag": 1, "behot_time": 1543083235, "comments_count": 11, "group_id": "6626599935003329028", "middle_image": "http://p1.pstatp.com/list/pgc-image/d2bc2d21b02047d2afc4eb120a85c1c8"}, {"image_url": "//p99.pstatp.com/list/pgc-image/a5f2b7ee9c954ea9a7c441afaa80e325", "single_mode": false, "middle_mode": true, "more_mode": false, "tag": "news_essay", "chinese_tag": "\u7f8e\u6587", "tag_url": "news_essay", "title": "\u5f88\u591a\u670b\u53cb\u90fd\u662f\u4ece\u6b64\u7edd\u4ea4\u7684\uff0c\u6545\u4e8b\u5f88\u77ed\uff0c\u5374\u8bf4\u7a7f\u4e86\u4eba\u6027\uff01", "label": ["\u7f8e\u6587"], "source": "\u66ae\u91ce\u7f8e\u516e", "group_source": 2, "has_gallery": true, "media_url": "/c/user/107737999069/", "media_avatar_url": "//p2.pstatp.com/large/daf80006999af39069d6", "image_list": [{"url": "//p99.pstatp.com/list/640x360/pgc-image/e4c25563c6e24759b6fafa8e1d623d27", "width": 640, "url_list": [{"url": "http://p99.pstatp.com/large/pgc-image/e4c25563c6e24759b6fafa8e1d623d27"}, {"url": "http://pb3.pstatp.com/large/pgc-image/e4c25563c6e24759b6fafa8e1d623d27"}, {"url": "http://pb1.pstatp.com/large/pgc-image/e4c25563c6e24759b6fafa8e1d623d27"}], "uri": "large/pgc-image/e4c25563c6e24759b6fafa8e1d623d27", "height": 400}, {"url": "//p99.pstatp.com/large/pgc-image/a5f2b7ee9c954ea9a7c441afaa80e325", "width": 640, "url_list": [{"url": "http://p99.pstatp.com/large/pgc-image/a5f2b7ee9c954ea9a7c441afaa80e325"}, {"url": "http://pb3.pstatp.com/large/pgc-image/a5f2b7ee9c954ea9a7c441afaa80e325"}, {"url": "http://pb1.pstatp.com/large/pgc-image/a5f2b7ee9c954ea9a7c441afaa80e325"}], "uri": "large/pgc-image/a5f2b7ee9c954ea9a7c441afaa80e325", "height": 400}, {"url": "//p3.pstatp.com/large/pgc-image/7efad8ae54e844c9bc9cf44f1c5ea0d4", "width": 640, "url_list": [{"url": "http://p3.pstatp.com/large/pgc-image/7efad8ae54e844c9bc9cf44f1c5ea0d4"}, {"url": "http://pb9.pstatp.com/large/pgc-image/7efad8ae54e844c9bc9cf44f1c5ea0d4"}, {"url": "http://pb1.pstatp.com/large/pgc-image/7efad8ae54e844c9bc9cf44f1c5ea0d4"}], "uri": "large/pgc-image/7efad8ae54e844c9bc9cf44f1c5ea0d4", "height": 400}], "gallary_image_count": 6, "source_url": "/group/6626981572044128781/", "article_genre": "gallery", "item_id": "6626981572044128781", "is_feed_ad": false, "gallary_flag": 1, "behot_time": 1543083234, "comments_count": 35, "group_id": "6626981572044128781", "middle_image": "http://p99.pstatp.com/list/pgc-image/a5f2b7ee9c954ea9a7c441afaa80e325"}, {"image_url": "//p3.pstatp.com/list/pgc-image/0ca6839b2c254b73846f5ccff2c8e707", "single_mode": false, "middle_mode": true, "more_mode": true, "tag": "news_military", "chinese_tag": "\u519b\u4e8b", "tag_url": "news_military", "title": "2\u6b21\u83b7\u5f97\u4e2a\u4eba\u4e00\u7b49\u529f \u6253\u8d25\u6b27\u7f8e8\u56fd13\u652f\u7279\u79cd\u90e8\u961f\u83b78\u4e2a\u7b2c\u4e00 \u78346\u9879\u7eaa\u5f55", "label": ["\u5f20\u91d1\u6d9b", "\u519b\u4e8b"], "source": "\u4e09\u7f8a\u4eba\u7269\u5fd7", "group_source": 2, "has_gallery": true, "media_url": "/c/user/53333937659/", "media_avatar_url": "//p9.pstatp.com/large/a14a0000086bc06d0b2d", "image_list": [{"url": "//p3.pstatp.com/list/640x360/pgc-image/0ca6839b2c254b73846f5ccff2c8e707"}, {"url": "//p1.pstatp.com/list/190x124/pgc-image/fac820f000ba43fba50f08839a3a2d82"}, {"url": "//p3.pstatp.com/list/190x124/pgc-image/6adfaee610d14fdfa35fe55b0fa79737"}], "gallary_image_count": 6, "source_url": "/group/6625766463472927245/", "article_genre": "gallery", "item_id": "6625766463472927245", "is_feed_ad": false, "gallary_flag": 1, "behot_time": 1543083233, "comments_count": 910, "group_id": "6625766463472927245", "middle_image": "http://p3.pstatp.com/list/pgc-image/0ca6839b2c254b73846f5ccff2c8e707"}, {"image_url": "//p1.pstatp.com/list/pgc-image/1536203914705e6e674cd2f", "single_mode": false, "middle_mode": true, "more_mode": true, "tag_url": "search/?keyword=None", "title": "\u5168\u7403\u201c\u6700\u81ea\u5728\u7684\u5730\u65b9\u201d\uff0c\u4e0d\u8981\u8bfb\u4e66\u4e5f\u4e0d\u8981\u5de5\u4f5c\uff0c\u4e00\u5929\u53ea\u505a\u4e00\u4ef6\u4e8b", "label": ["\u52a8\u7269", "\u7f9a\u7f8a", "\u6c34\u679c", "\u8bfb\u4e66", "\u6c34\u725b"], "source": "\u65c5\u9014\u751f\u6d3b", "group_source": 2, "has_gallery": true, "media_url": "/c/user/53569341657/", "media_avatar_url": "//p1.pstatp.com/large/2c690001be87f2a2b94f", "image_list": [{"url": "//p1.pstatp.com/list/364x360/pgc-image/1536203914705e6e674cd2f"}, {"url": "//p3.pstatp.com/list/272x178/pgc-image/153620391477035a10c803d"}, {"url": "//p99.pstatp.com/list/272x178/pgc-image/1536203915229f6d9dc7564"}], "gallary_image_count": 12, "source_url": "/group/6597946416113385988/", "article_genre": "gallery", "item_id": "6597946416113385988", "is_feed_ad": false, "gallary_flag": 2, "behot_time": 1543083232, "comments_count": 267, "group_id": "6597946416113385988", "middle_image": "http://p1.pstatp.com/list/pgc-image/1536203914705e6e674cd2f"}, {"image_url": "//p9.pstatp.com/list/dfic-imagehandler/456f6de6-081f-4e38-be14-f18c8edfcfab", "single_mode": false, "middle_mode": true, "more_mode": true, "tag": "news_photography", "chinese_tag": "\u6444\u5f71", "tag_url": "search/?keyword=%E6%91%84%E5%BD%B1", "title": "1949\u5e74\u7684\u4e2d\u56fd\uff0c\u73cd\u8d35\u5f69\u7167100\u56fe", "label": ["\u6444\u5f71", "\u65af\u5927\u6797"], "source": "\u58f9\u5ff5\u5f71\u50cf", "group_source": 2, "has_gallery": true, "media_url": "/c/user/51649017743/", "media_avatar_url": "//p10.pstatp.com/large/616b0004c4aa1adf884f", "image_list": [{"url": "//p9.pstatp.com/list/dfic-imagehandler/456f6de6-081f-4e38-be14-f18c8edfcfab"}, {"url": "//p3.pstatp.com/list/272x178/pgc-image/abfc5677e4144133adc63a67ac4dd90c"}, {"url": "//p3.pstatp.com/list/272x178/pgc-image/184bda1ef32b437f8143e578804dd52c"}], "gallary_image_count": 100, "source_url": "/group/6625800958418878984/", "article_genre": "gallery", "item_id": "6625800958418878984", "is_feed_ad": false, "gallary_flag": 2, "behot_time": 1543083231, "comments_count": 157, "group_id": "6625800958418878984", "middle_image": "http://p9.pstatp.com/list/dfic-imagehandler/456f6de6-081f-4e38-be14-f18c8edfcfab"}, {"image_url": "//p3.pstatp.com/list/pgc-image/780b63777e86421a9ed7d509e1781d53", "single_mode": false, "middle_mode": true, "more_mode": true, "tag": "news_agriculture", "chinese_tag": "\u4e09\u519c", "tag_url": "search/?keyword=%E4%B8%89%E5%86%9C", "title": "\u519c\u675168\u5c81\u8001\u94c1\u5320\u6253\u9020\u4e00\u79cd\u642c\u8fd0\u795e\u5668\uff0c\u4e3a\u5565\u664b\u9655\u8c6b\u5180\u75185\u7701\u4eba\u90fd\u6765\u8d2d\u4e70", "label": ["\u519c\u6751", "\u519c\u6c11", "\u624b\u5de5\u827a", "\u4f53\u68c0", "\u4e09\u519c"], "source": "\u9ec4\u6ce5\u5df4\u5149\u5f71", "group_source": 2, "has_gallery": true, "media_url": "/c/user/98404035702/", "media_avatar_url": "//p5a.pstatp.com/large/6eeb0002d759e2597951", "image_list": [{"url": "//p3.pstatp.com/list/640x360/pgc-image/780b63777e86421a9ed7d509e1781d53"}, {"url": "//p99.pstatp.com/list/190x124/pgc-image/5faab620202241fda51f59303d28fb9f"}, {"url": "//p3.pstatp.com/list/190x124/pgc-image/a2c287c8f92a4f08a127625edd2bf815"}], "gallary_image_count": 10, "source_url": "/group/6627255289336824327/", "article_genre": "gallery", "item_id": "6627255289336824327", "is_feed_ad": false, "gallary_flag": 1, "behot_time": 1543083230, "comments_count": 7, "group_id": "6627255289336824327", "middle_image": "http://p3.pstatp.com/list/pgc-image/780b63777e86421a9ed7d509e1781d53"}, {"image_url": "//p99.pstatp.com/list/pgc-image/581428d9c77a498eaefdc5422c1defb5", "single_mode": false, "middle_mode": true, "more_mode": true, "tag": "news_travel", "chinese_tag": "\u65c5\u6e38", "tag_url": "news_travel", "title": "\u6211\u56fd\u9762\u79ef\u6700\u8fbd\u9614\u7684\u7701\u4efd\uff0c\u7701\u5185\u6700\u53d1\u8fbe\u57ce\u5e02\u4e3a\u4e09\u7ebf\uff0c\u540d\u6c14\u5728\u56fd\u5185\u5f88\u9ad8", "label": ["\u7ecf\u6d4e", "\u5927\u5c0f\u6d1e\u5929", "\u9a6c\u5c14\u4ee3\u592b", "\u65c5\u6e38"], "source": "\u8def\u9014\u4e0a\u7684\u6545\u4e8b", "group_source": 2, "has_gallery": true, "media_url": "/c/user/95373379229/", "media_avatar_url": "//p3.pstatp.com/large/6ed80004859d9d73ca56", "image_list": [{"url": "//p99.pstatp.com/list/364x360/pgc-image/581428d9c77a498eaefdc5422c1defb5"}, {"url": "//p3.pstatp.com/list/272x178/pgc-image/51b8d107a90f4b9e99dc84efaa03987e"}, {"url": "//p3.pstatp.com/list/272x178/pgc-image/1341cce4a5e44029aff3e04ba13a4498"}], "gallary_image_count": 8, "source_url": "/group/6627439060442939911/", "article_genre": "gallery", "item_id": "6627439060442939911", "is_feed_ad": false, "gallary_flag": 2, "behot_time": 1543083229, "comments_count": 1, "group_id": "6627439060442939911", "middle_image": "http://p99.pstatp.com/list/pgc-image/581428d9c77a498eaefdc5422c1defb5"}, {"image_url": "//p99.pstatp.com/list/pgc-image/153719402521377b4263f64", "single_mode": false, "middle_mode": true, "more_mode": true, "tag": "news_culture", "chinese_tag": "\u6587\u5316", "tag_url": "search/?keyword=%E6%96%87%E5%8C%96", "title": "\u53e4\u8001\u6355\u9c7c\u6280\u827a\uff0c\u5343\u5e74\u6587\u5316\u9057\u4ea7\u2014\u2014\u6e14\u6881", "label": ["\u5efa\u7b51", "\u6587\u5316"], "source": "\u68a6\u7684\u5bb6\u5c45\u751f\u6d3b", "group_source": 2, "has_gallery": true, "media_url": "/c/user/3861023736/", "media_avatar_url": "//p6.pstatp.com/large/b72200042a7bb863393f", "image_list": [{"url": "//p99.pstatp.com/list/364x360/pgc-image/153719402521377b4263f64"}, {"url": "//p3.pstatp.com/list/272x178/pgc-image/153719406147801e8878da2"}, {"url": "//p1.pstatp.com/list/272x178/pgc-image/1537194025275d2d8440bd1"}], "gallary_image_count": 18, "source_url": "/group/6602199694732952071/", "article_genre": "gallery", "item_id": "6602199694732952071", "is_feed_ad": false, "gallary_flag": 2, "behot_time": 1543083228, "comments_count": 98, "group_id": "6602199694732952071", "middle_image": "http://p99.pstatp.com/list/pgc-image/153719402521377b4263f64"}, {"image_url": "//p9.pstatp.com/list/pgc-image/1536561788822e4fdafc0b8", "single_mode": false, "middle_mode": true, "more_mode": true, "tag": "news_fashion", "chinese_tag": "\u65f6\u5c1a", "tag_url": "news_fashion", "title": "\u6296\u97f3\u65b0\u5a18\u534a\u8def\u5378\u5986\u201c\u73b0\u771f\u5bb9\u201d\uff0c\u6c34\u5012\u4e0b\u53bb\u7684\u77ac\u95f4\uff0c\u7f51\u53cb\u5927\u547c\uff1a\u9000\u8d27\uff01", "label": ["\u62a4\u80a4", "\u5316\u5986", "\u65f6\u5c1a"], "source": "\u65f6\u5c1a\u502a\u5f69\u8679", "group_source": 2, "has_gallery": true, "media_url": "/c/user/100114211356/", "media_avatar_url": "//p1.pstatp.com/large/8b6000032a8dccec5569", "image_list": [{"url": "//p9.pstatp.com/list/640x360/pgc-image/1536561788822e4fdafc0b8"}, {"url": "//p3.pstatp.com/list/190x124/pgc-image/15365617888854325a3c590"}, {"url": "//p1.pstatp.com/list/190x124/pgc-image/1536561788888a5865f7c9c"}], "gallary_image_count": 6, "source_url": "/group/6599484513410089485/", "article_genre": "gallery", "item_id": "6599484513410089485", "is_feed_ad": false, "gallary_flag": 1, "behot_time": 1543083227, "comments_count": 404, "group_id": "6599484513410089485", "middle_image": "http://p9.pstatp.com/list/pgc-image/1536561788822e4fdafc0b8"}, {"image_url": "//p99.pstatp.com/list/pgc-image/272ea12db1564b049ba3e6e5e3417f14", "single_mode": false, "middle_mode": true, "more_mode": true, "tag": "news_photography", "chinese_tag": "\u6444\u5f71", "tag_url": "search/?keyword=%E6%91%84%E5%BD%B1", "title": "\u8d8a\u6218\u671f\u95f4\u7f8e\u56fd\u5411\u8001\u631d\u6295\u4e0b\u4e86200\u591a\u4e07\u5428\u70b8\u5f39\uff0c\u906d\u6b64\u52ab\u96be\u5982\u4f55\u590d\u539f\uff1f", "label": ["\u519b\u4e8b\u5386\u53f2", "\u8001\u631d", "\u6444\u5f71", "\u6b66\u5668", "\u4f5b\u6559"], "source": "\u56fd\u5bb6\u5730\u7406\u4e2d\u6587\u7f51", "group_source": 2, "has_gallery": true, "media_url": "/c/user/4019038236/", "media_avatar_url": "//p2.pstatp.com/large/2311/6424494835", "image_list": [{"url": "//p99.pstatp.com/list/272x178/pgc-image/272ea12db1564b049ba3e6e5e3417f14"}, {"url": "//p3.pstatp.com/list/364x360/pgc-image/235f94ecc4e44801940ffe45b4178783"}, {"url": "//p9.pstatp.com/list/272x178/pgc-image/0412834d06d94d3a96dbc43c5b419dea"}], "gallary_image_count": 6, "source_url": "/group/6626985024732267011/", "article_genre": "gallery", "item_id": "6626985024732267011", "is_feed_ad": false, "gallary_flag": 3, "behot_time": 1543083226, "comments_count": 2, "group_id": "6626985024732267011", "middle_image": "http://p99.pstatp.com/list/pgc-image/272ea12db1564b049ba3e6e5e3417f14"}, {"image_url": "//p99.pstatp.com/list/pgc-image/1540356739843426c8f39d1", "single_mode": false, "middle_mode": true, "more_mode": true, "tag": "news_military", "chinese_tag": "\u519b\u4e8b", "tag_url": "news_military", "title": "\u5973\u5b50\u9776\u573a\u8bd5\u5c04\u201c\u6bdb\u745f\u81ea\u52a8\u624b\u67aa\u201d\u3001\u53c8\u79f0\uff1a\u9a73\u58f3\u67aa", "label": ["\u6b66\u5668", "\u5c04\u51fb", "\u6b66\u5668\u88c5\u5907", "\u519b\u4e8b"], "source": "\u6ec7\u897f\u56fe\u866b", "group_source": 2, "has_gallery": true, "media_url": "/c/user/92288367458/", "media_avatar_url": "//p8.pstatp.com/large/d27b0007c9702713eb13", "image_list": [{"url": "//p99.pstatp.com/list/364x360/pgc-image/1540356739843426c8f39d1"}, {"url": "//p99.pstatp.com/list/272x178/pgc-image/15403567218212472cad0bf"}, {"url": "//p99.pstatp.com/list/272x178/pgc-image/1540356721845e0f3691dbb"}], "gallary_image_count": 7, "source_url": "/group/6615786654680482318/", "article_genre": "gallery", "item_id": "6615786654680482318", "is_feed_ad": false, "gallary_flag": 2, "behot_time": 1543083225, "comments_count": 60, "group_id": "6615786654680482318", "middle_image": "http://p99.pstatp.com/list/pgc-image/1540356739843426c8f39d1"}], "next": {"max_behot_time": 1543083225}}
  ''';
  
  new EntityWriterBuilder()
    .name('ToutiaoModel')
    .jsonStr(jsonStrFromToutiao)
    .outpath('output/')
    .build()
    .convert();
}

void testFromFile() {
  
  var pwd = getDir(Platform.script.path);
  var input = '${pwd}input/input.json';
  var outPath = '${pwd}/output/';
  
  converFromFile(input, outPath);
}